<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Magische Runen</title>
<link rel="manifest" href="manifest.json">
<style>
  @font-face {
    font-family: 'MyRuneFont';
    src: url('runes.ttf') format('truetype');
  }

  html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    font-family: 'MyRuneFont', sans-serif;
    background: radial-gradient(circle at center, rgba(50,50,80,0.8), rgba(10,10,20,1));
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    cursor: none;
  }

  #cursor {
    position: absolute;
    width: 15px;
    height: 15px;
    background: cyan;
    border-radius: 50%;
    box-shadow: 0 0 10px cyan, 0 0 20px cyan, 0 0 30px cyan;
    pointer-events: none;
    z-index: 9999;
    transition: left 0.05s linear, top 0.05s linear;
  }

  body::before, body::after {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(150,150,255,0.2), transparent 70%);
    animation: swirl 60s infinite linear;
    filter: blur(150px);
    z-index: 0;
  }
  body::after { animation-direction: reverse; }
  @keyframes swirl { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

  .circle {
    position: absolute;
    width: 350px;
    height: 350px;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 1;
  }

  .rune {
    position: absolute;
    font-size: 2rem;
    cursor: pointer;
    transition: transform 0.3s, color 0.3s, text-shadow 0.3s, opacity 1s;
    text-shadow: 0 0 10px cyan, 0 0 20px cyan, 0 0 30px cyan;
    animation: floatRotate 8s infinite linear;
    transform-origin: center center;
    opacity: 0;
  }

  @keyframes floatRotate {
    0% { transform: rotate(0deg); }
    25% { transform: rotate(5deg); }
    50% { transform: rotate(0deg); }
    75% { transform: rotate(-5deg); }
    100% { transform: rotate(0deg); }
  }

  .rune:hover {
    transform: scale(1.5);
    color: cyan;
    text-shadow: 0 0 20px cyan, 0 0 40px cyan, 0 0 60px cyan;
  }
</style>
</head>
<body>
<div id="cursor"></div>
<div class="circle" id="circle"></div>

<script>
  // Service Worker Registrierung
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('service-worker.js')
      .then(() => console.log('Service Worker registered'))
      .catch(err => console.log('Service Worker failed', err));
  }

  // Vollbild beim ersten Klick
  let fullscreenActivated = false;
  document.body.addEventListener('click', () => {
    if (!fullscreenActivated) {
      fullscreenActivated = true;
      if (document.documentElement.requestFullscreen) {
        document.documentElement.requestFullscreen();
      } else if (document.documentElement.webkitRequestFullscreen) {
        document.documentElement.webkitRequestFullscreen();
      }
    }
  });

  // Mauszeiger als leuchtender Punkt
  const cursor = document.getElementById('cursor');
  document.addEventListener('mousemove', e => {
    cursor.style.left = `${e.clientX - cursor.offsetWidth/2}px`;
    cursor.style.top = `${e.clientY - cursor.offsetHeight/2}px`;
  });

    const runes = ["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T"];
    const correctSequence = ["N","I","C","O"];
  let currentIndex = 0;

  const circle = document.getElementById("circle");
  const successAudio = new Audio('success.mp3');
  const fadeInAudio = new Audio('fadein.mp3');
  successAudio.volume = 0.3;
  fadeInAudio.volume = 0.3;

  function placeRunes() {
    circle.innerHTML = '';
    const rect = circle.getBoundingClientRect();
    const centerX = rect.width / 2;
    const centerY = rect.height / 2;
    const radius = 150;

    runes.forEach((rune, i) => {
      const angle = (i / runes.length) * 2 * Math.PI;
      const x = centerX + radius * Math.cos(angle);
      const y = centerY + radius * Math.sin(angle);

      const el = document.createElement("div");
      el.classList.add("rune");
      el.textContent = rune;
      el.style.left = `${x}px`;
      el.style.top = `${y}px`;
      el.style.transform = `translate(-50%, -50%) rotate(0deg)`;
      el.style.opacity = 0;

      setTimeout(() => { 
        el.style.opacity = 1;
        fadeInAudio.currentTime = 0;
        fadeInAudio.play();
      }, 100);

      el.addEventListener("click", () => {
        if (rune === correctSequence[currentIndex]) {
          el.style.color = "lime";
          el.style.textShadow = "0 0 20px lime, 0 0 40px lime, 0 0 60px lime";
          currentIndex++;
          if (currentIndex === correctSequence.length) {
            successAudio.currentTime = 0;
            successAudio.play();
            setTimeout(() => {
              document.querySelectorAll('.rune').forEach(r => r.style.opacity = '0');
              setTimeout(() => {
                currentIndex = 0;
                placeRunes();
              }, 60000); // 1 Minute Pause
            }, 1000);
          }
        } else {
          currentIndex = 0;
          document.querySelectorAll(".rune").forEach(r => {
            r.style.color = "white";
            r.style.textShadow = "0 0 10px cyan, 0 0 20px cyan, 0 0 30px cyan";
          });
        }
      });

      circle.appendChild(el);
    });
  }

  placeRunes();
</script>
</body>
</html>
